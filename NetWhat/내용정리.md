# NetWhat 내용 정리

## IP ADDRESS

- TCP/IP 프로토콜에서 이 프로토콜을 사용하는 장비들을 구분해주기 위한 고유값

## Netmask

IPv4 32bit
8bit.8bit.8bit.8bit
11111111.11111111.00000000.00000000

0.0.0.0~255.255.255.255
A 호스트비트 24  네트워크 8
B 16	16
C 8		24
- IP 주소에서 네트워크 주소 부분의 비트를 1로 치환한 것이 넷 마스크이다.
- IP 주소와 넷마스크를 AND 연산을 하면 네트워크 주소를 얻을 수 있다.

(<-  네트워크   주소  부분  ->)(<-호스트->)
11001011 00000000 01110001 00101011     <- IP주소
11111111 11111111 11111111 00000000     <- 넷마스크

넷마스크 - 기본 클래스를 기준으로 네트워크를 쪼갬
서브넷마스크 - 클래스 기준이 아닌 특정 영역으로 네트워크를 쪼갬
=> 기본 서브넷 마스크 = 넷마스크

## Subnetting

- 한 개의 네트워크를 서브넷 마스크를 이용해 여러 개의 서브넷 네트워크로 분할 하는 것.
- 네트워크를 합쳐 확장ㅎ아는 슈퍼넷팅이라는 개념또한 존재한다.

서브넷팅은 서브넷 마스크를 이용하여 Host ID를 Network ID로 변환하게 되고, 슈퍼넷팅은 서브넷 마스크를 이용하여 Network ID를 Host ID로 변환하게 되어서 가능해진다.
=> 이부분 헷갈림,,,

## 공인/사설 IP의 차이점

### 공인IP

- 인터넷 사용자의 로컬 네트워크를 식별하기 위해 ISP(인터넷 서비스 공급자)가 제공하는 IP 주소이다. 공용 IP 주소라고도 불리며 외부에 공개되어 있는 IP 주소이다.

### 사설IP

- 일반 가정이나 회사 내 등에 할당된 네트워크의 IP 주소이며, 로컬 IP, 가상 IP라고도 한다. IPv4의 주소부족으로 인해 서브넷팅된 IP이기 때문에 라우터에 의해 로컬 네트워크상의 PC 나 장치에 할당된다.

- 사설 IP는 인터넷에 직접 연결 불가능, 라우터를 통해 1개의 공인 IP를 할당받아야함.
	라우터에 연결된 개인 PC는 사설 IP를 각각 할당 받아 인터넷에 접속할 수 있게 된다.

		공인 IP (Public IP)			사설 IP (Private IP)
할당 주체	ISP(인터넷 서비스 공급자)		라우터(공유기)
할당 대상	개인 또는 회사의 서버(라우터)	개인 또는 회사의 기기
고유성		인터넷 상에서 유일한 주소		하나의 네트워크 안에서 유일
공개 여부	내/외부 접근 가능.				외부 접근 불가능


24-bit block A	10.0.0.0 – 10.255.255.255	8 bits
20-bit block B	172.16.0.0 – 172.31.255.255	12 bits
16-bit block C	192.168.0.0 – 192.168.255.255	16 bits

💻➡🌏 : 사설 IP를 할당받은 스마트폰 혹은 개인 PC가 데이터 패킷을 인터넷으로 전송하면, 라우터(공유기)가 해당 사설 IP를 공인 IP로 바꿔서 전송한다.

🌏➡💻 : 인터넷에서 오는 데이터 패킷의 목적지도 해당하는 사설 IP로 변경한 후 개인 스마트폰 혹은 PC에 전송한다.

## DHCP

동적 호스트 설정 프로토콜(Dynamic Host Configuration Protocol)로서 해당 호스트에게 IP주소, 서브넷 마스크, 기본게이트웨이 IP주소, DNS서버 IP주소 를 자동으로 일정 시간 할당해주는 인터넷 프로토콜

DHCP를 통한 IP 주소 할당은 임대기간(IP Lease Time)을 명시하여 그 기간 동안만 단말이 IP 주소를 사용하도록 하는 것이다.
단말은 임대기간 이후에도 계속 해당 IP 주소를 사용하고자 한다면 IP 주소 임대기간 갱신(IP Address Renewal)을 DHCP 서버에 요청해야 하고 또한 단말은 임대 받은 IP 주소가 더 이상 필요치 않게 되면 IP 주소 반납 절차(IP Address Release)를 수행하게 된다.

서버에게 IP를 할당받으면 TCP/IP 통신을 할 수 있다.

DHCP 임대과정 4단계

1. DHCP Discover
client -> server, 호스트의 MAC이포함된 브로드캐스트 패킷 전송

2) DHCP Offer
Server가 Client에서 IP 정보를 제안하는 메시지이다. (출발지 포트: 67번 / 목적지 포트: 68번)

Unicast 혹은 Broadcast 방식 중 하나로 전송된다.

일반적으로는 Broadcast방식으로 전송되지만 Client와 Server 운영체제 종류에 따라 Unicast 방식으로 전송되는 경우가 있다.

운영체제가 Window일 경우 기본적으로 Broadcast 방식을 사용한다.

3. DHCP Request
Client가 Server에게 제안받은 IP 정보를 공식적으로 요청하는 메시지이다. (출발지 포트: 68번 / 목적지 포트: 67번)

Broadcast 방식으로 전송한다.

4. DHCP ACK
DHCP 서버가 최종적으로 IP 정보 등을 Client에게 할당하는 메시지이다. (출발지 포트: 67번 / 목적지 포트: 68번)

Unicast 혹은 Broadcast 방식 중 하나로 전송된다. 일반적으로는 Broadcast방식으로 전송되지만 Client와 Server 운영체제 종류에 따라 Unicast 방식으로 전송되는 경우가 있다

운영체제가 Window일 경우 기본적으로 Broadcast 방식을 사용한다.

https://peemangit.tistory.com/355
=> DHCP가 보내는 패킷 자료!!

182.161.121.118/24
128 + 54(32 + 16 + 4 +2)
10110110 11111111 11111111 11111111


67414141414142676f6b617362667a50364c576f61585069487649324c4469383935316458316d5437313869723039776c446b78456971456d6637536c6b657a4f6f4731454e654d656c474c776c35446a3863673138764f436c52724259495a5979444748744a4f63507645317a7272796b38644b534d4e4546375341753251742d7733566e50384279714f5444646e354d527362507654426d756e7449423266784c5953706655376b506d50654c5f6873496342545668384b39737679534e7277436b594a6f50526f675f35484b396a443469554737437847534b6b5146446e794977734c533059767a62507568614f6757374d4c504e79617954576a53796f746957314f45766732572d3955397332573573737a4f4e716b504f76325336716463386b4442675473796367504a68394f4c57596c41494f773854497277514e7956636b42764c3447547872714939747470646f434e70626468426c546445583331704f48524a425a4d53573234366657786c4558675868646a4b676949764564536d4d7a4d4d6b72644d546656333675305f6a62384c74423841505a514f3545646b4f466e724579533566565f463135454842595f57554456634767426c513736444b7a587346776b4664316c54456a596a4d4d4e4d324e686b6f702d4169513d3d

01111110 11110001 10101011 11001001
11111111 11110000 00000000 00000000

01111110 11110000 00000000 00000000
126.240.0.0
10101010 0111100
11111111 0000000
10101010 0000000

## Ping

- 네트워크의 현 상태를 체크할때 사용함.
- ICMP(Internet Control Message Protocol) 중 하나임
- ICMP는 호스트 서버와 인터넷 게이트웨이 사이에서 메시지를 제어하고 에러를 알려줌.

126.241.171.201/12
64 + 62(32 + 16 8 4 2)
01111110 .xxxx xxxx . xxxxxxxx .xxxxxxxx
               0000   00000000  00000000